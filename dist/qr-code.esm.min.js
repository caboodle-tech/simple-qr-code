const e=new class{#e={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8};#t={L:1,M:0,Q:3,H:2};#n={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};#r=null;#i=null;#a=1335;#o=21522;#s=7973;#c=236;#l=17;#u=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];#d=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];constructor(){this.#r=Array(256),this.#i=Array(256);for(let e=0;e<8;e+=1)this.#r[e]=1<<e;for(let e=8;e<256;e+=1)this.#r[e]=this.#r[e-4]^this.#r[e-5]^this.#r[e-6]^this.#r[e-8];for(let e=0;e<255;e+=1)this.#i[this.#r[e]]=e}#f(e){if(e<1)throw Error(`glog(${e})`);return this.#i[e]}#p(e){let t=e;for(;t<0;)t+=255;for(;t>=256;)t-=255;return this.#r[t]}#m(e){return this.#u[e-1]}#h(e,t,n){return e<=7?t<=7||t>=n-7:t<=7?e>=n-7:!1}#g(e){let t=0,n=e;for(;n!==0;)t+=1,n>>>=1;return t}#_(e){let t=e<<10;for(;this.#g(t)-this.#g(this.#a)>=0;)t^=this.#a<<this.#g(t)-this.#g(this.#a);return(e<<10|t)^this.#o}#v(e){let t=e<<12;for(;this.#g(t)-this.#g(this.#s)>=0;)t^=this.#s<<this.#g(t)-this.#g(this.#s);return e<<12|t}#y(e){switch(e){case this.#n.PATTERN000:return(e,t)=>(e+t)%2==0;case this.#n.PATTERN001:return(e,t)=>e%2==0;case this.#n.PATTERN010:return(e,t)=>t%3==0;case this.#n.PATTERN011:return(e,t)=>(e+t)%3==0;case this.#n.PATTERN100:return(e,t)=>(Math.floor(e/2)+Math.floor(t/3))%2==0;case this.#n.PATTERN101:return(e,t)=>e*t%2+e*t%3==0;case this.#n.PATTERN110:return(e,t)=>(e*t%2+e*t%3)%2==0;case this.#n.PATTERN111:return(e,t)=>(e*t%3+(e+t)%2)%2==0;default:throw Error(`bad maskPattern:${e}`)}}#b(e,t){if(1<=t&&t<10)switch(e){case this.#e.MODE_NUMBER:return 10;case this.#e.MODE_ALPHA_NUM:return 9;case this.#e.MODE_8BIT_BYTE:return 8;case this.#e.MODE_KANJI:return 8;default:throw Error(`mode:${e}`)}else if(t<27)switch(e){case this.#e.MODE_NUMBER:return 12;case this.#e.MODE_ALPHA_NUM:return 11;case this.#e.MODE_8BIT_BYTE:return 16;case this.#e.MODE_KANJI:return 10;default:throw Error(`mode:${e}`)}else if(t<41)switch(e){case this.#e.MODE_NUMBER:return 14;case this.#e.MODE_ALPHA_NUM:return 13;case this.#e.MODE_8BIT_BYTE:return 16;case this.#e.MODE_KANJI:return 12;default:throw Error(`mode:${e}`)}else throw Error(`type:${t}`)}#x(e){let t=this.#C([1],0);for(let n=0;n<e;n+=1)t=t.multiply(this.#C([1,this.#p(n)],0));return t}#S(e){let t=e.getModuleCount(),n=0;for(let r=0;r<t;r+=1)for(let i=0;i<t;i+=1){let a=0,o=e.isDark(r,i);for(let n=-1;n<=1;n+=1)if(!(r+n<0||t<=r+n))for(let s=-1;s<=1;s+=1)i+s<0||t<=i+s||n===0&&s===0||o===e.isDark(r+n,i+s)&&(a+=1);a>5&&(n+=3+a-5)}for(let r=0;r<t-1;r+=1)for(let i=0;i<t-1;i+=1){let t=0;e.isDark(r,i)&&(t+=1),e.isDark(r+1,i)&&(t+=1),e.isDark(r,i+1)&&(t+=1),e.isDark(r+1,i+1)&&(t+=1),(t===0||t===4)&&(n+=3)}for(let r=0;r<t;r+=1)for(let i=0;i<t-6;i+=1)e.isDark(r,i)&&!e.isDark(r,i+1)&&e.isDark(r,i+2)&&e.isDark(r,i+3)&&e.isDark(r,i+4)&&!e.isDark(r,i+5)&&e.isDark(r,i+6)&&(n+=40);for(let r=0;r<t;r+=1)for(let i=0;i<t-6;i+=1)e.isDark(i,r)&&!e.isDark(i+1,r)&&e.isDark(i+2,r)&&e.isDark(i+3,r)&&e.isDark(i+4,r)&&!e.isDark(i+5,r)&&e.isDark(i+6,r)&&(n+=40);let r=0;for(let n=0;n<t;n+=1)for(let i=0;i<t;i+=1)e.isDark(i,n)&&(r+=1);let i=Math.abs(100*r/t/t-50)/5;return n+=i*10,n}#C(e,t){if(e.length===void 0)throw Error(`${e.length}/${t}`);let n=(()=>{let n=0;for(;n<e.length&&e[n]===0;)n+=1;let r=Array(e.length-n+t);for(let t=0;t<e.length-n;t+=1)r[t]=e[t+n];return r})(),r=this;return{getAt:e=>n[e],getLength:()=>n.length,multiply:e=>{let t=Array(n.length+e.getLength()-1);for(let i=0;i<n.length;i+=1)for(let a=0;a<e.getLength();a+=1)t[i+a]^=r.#p(r.#f(n[i])+r.#f(e.getAt(a)));return r.#C(t,0)},mod:e=>{if(n.length-e.getLength()<0)return r.#C(n,0);let t=r.#f(n[0])-r.#f(e.getAt(0)),i=Array(n.length);for(let e=0;e<n.length;e+=1)i[e]=n[e];for(let n=0;n<e.getLength();n+=1)i[n]^=r.#p(r.#f(e.getAt(n))+t);return r.#C(i,0).mod(e)}}}#w(){let e=[],t=0,n=n=>{let r=Math.floor(t/8);e.length<=r&&e.push(0),n&&(e[r]|=128>>>t%8),t+=1};return{getBuffer:()=>e,getAt:t=>(e[Math.floor(t/8)]>>>7-t%8&1)==1,put:(e,t)=>{for(let r=0;r<t;r+=1)n((e>>>t-r-1&1)==1)},getLengthInBits:()=>t,putBit:n}}#T(e){let t=this.#e.MODE_8BIT_BYTE,n=(()=>{let t=[];for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);t.push(r&255)}return t})();return{getMode:()=>t,getLength:()=>n.length,write:e=>{for(let t=0;t<n.length;t+=1)e.put(n[t],8)}}}#E(e,t){let n=typeof t==`number`?t:this.#t[t],r;switch(n){case 1:r=this.#d[(e-1)*4+0];break;case 0:r=this.#d[(e-1)*4+1];break;case 3:r=this.#d[(e-1)*4+2];break;case 2:r=this.#d[(e-1)*4+3];break;default:throw Error(`bad rs block @ typeNumber:${e}/errorCorrectionLevel:${t}`)}let i=r.length/3,a=[];for(let e=0;e<i;e+=1){let t=r[e*3+0],n=r[e*3+1],i=r[e*3+2];for(let e=0;e<t;e+=1)a.push({totalCount:n,dataCount:i})}return a}#D(e,t,n,r,i,a,o,s){let c=`http://www.w3.org/2000/svg`,l=s>0?1+s/100*4:0,u=l>0?Math.min(l,3.5):0,d=document.createElementNS(c,`rect`);d.setAttribute(`x`,t+r),d.setAttribute(`y`,n+r),d.setAttribute(`width`,7),d.setAttribute(`height`,7),d.setAttribute(`fill`,i),u>0&&(d.setAttribute(`rx`,u),d.setAttribute(`ry`,u)),e.appendChild(d);let f=document.createElementNS(c,`rect`);f.setAttribute(`x`,t+r+1),f.setAttribute(`y`,n+r+1),f.setAttribute(`width`,5),f.setAttribute(`height`,5),f.setAttribute(`fill`,o),u>0&&(f.setAttribute(`rx`,u),f.setAttribute(`ry`,u)),e.appendChild(f);let p=l>0?Math.min(l,1.5):0,m=document.createElementNS(c,`rect`);m.setAttribute(`x`,t+r+2),m.setAttribute(`y`,n+r+2),m.setAttribute(`width`,3),m.setAttribute(`height`,3),m.setAttribute(`fill`,a),p>0&&(m.setAttribute(`rx`,p),m.setAttribute(`ry`,p)),e.appendChild(m)}#O(e,t){let n=this,r=e,i=this.#t[t],a=null,o=0,s=null,c=[],l={},u=(e,t)=>{o=r*4+17,a=(()=>{let e=Array(o);for(let t=0;t<o;t+=1){e[t]=Array(o);for(let n=0;n<o;n+=1)e[t][n]=null}return e})(),d(0,0),d(o-7,0),d(0,o-7),m(),p(),g(e,t),r>=7&&h(e),s===null&&(s=y(r,i,c)),_(s,t)},d=(e,t)=>{for(let n=-1;n<=7;n+=1)if(!(e+n<=-1||o<=e+n))for(let r=-1;r<=7;r+=1)t+r<=-1||o<=t+r||(n>=0&&n<=6&&(r===0||r===6)||r>=0&&r<=6&&(n===0||n===6)||n>=2&&n<=4&&r>=2&&r<=4?a[e+n][t+r]=!0:a[e+n][t+r]=!1)},f=()=>{let e=0,t=0;for(let r=0;r<8;r+=1){u(!0,r);let i=n.#S(l);(r===0||e>i)&&(e=i,t=r)}return t},p=()=>{for(let e=8;e<o-8;e+=1)a[e][6]===null&&(a[e][6]=e%2==0);for(let e=8;e<o-8;e+=1)a[6][e]===null&&(a[6][e]=e%2==0)},m=()=>{let e=n.#m(r);for(let t=0;t<e.length;t+=1)for(let n=0;n<e.length;n+=1){let r=e[t],i=e[n];if(a[r][i]===null)for(let e=-2;e<=2;e+=1)for(let t=-2;t<=2;t+=1)e===-2||e===2||t===-2||t===2||e===0&&t===0?a[r+e][i+t]=!0:a[r+e][i+t]=!1}},h=e=>{let t=n.#v(r);for(let n=0;n<18;n+=1){let r=!e&&(t>>n&1)==1;a[Math.floor(n/3)][n%3+o-8-3]=r}for(let n=0;n<18;n+=1){let r=!e&&(t>>n&1)==1;a[n%3+o-8-3][Math.floor(n/3)]=r}},g=(e,t)=>{let r=i<<3|t,s=n.#_(r);for(let t=0;t<15;t+=1){let n=!e&&(s>>t&1)==1;t<6?a[t][8]=n:t<8?a[t+1][8]=n:a[o-15+t][8]=n}for(let t=0;t<15;t+=1){let n=!e&&(s>>t&1)==1;t<8?a[8][o-t-1]=n:t<9?a[8][15-t-1+1]=n:a[8][15-t-1]=n}a[o-8][8]=!e},_=(e,t)=>{let r=-1,i=o-1,s=7,c=0,l=n.#y(t);for(let t=o-1;t>0;t-=2)for(t===6&&--t;;){for(let n=0;n<2;n+=1)if(a[i][t-n]===null){let r=!1;c<e.length&&(r=(e[c]>>>s&1)==1),l(i,t-n)&&(r=!r),a[i][t-n]=r,--s,s===-1&&(c+=1,s=7)}if(i+=r,i<0||o<=i){i-=r,r=-r;break}}},v=(e,t)=>{let r=0,i=0,a=0,o=Array(t.length),s=Array(t.length);for(let c=0;c<t.length;c+=1){let l=t[c].dataCount,u=t[c].totalCount-l;i=Math.max(i,l),a=Math.max(a,u),o[c]=Array(l);for(let t=0;t<o[c].length;t+=1)o[c][t]=255&e.getBuffer()[t+r];r+=l;let d=n.#x(u),f=n.#C(o[c],d.getLength()-1).mod(d);s[c]=Array(d.getLength()-1);for(let e=0;e<s[c].length;e+=1){let t=e+f.getLength()-s[c].length;s[c][e]=t>=0?f.getAt(t):0}}let c=0;for(let e=0;e<t.length;e+=1)c+=t[e].totalCount;let l=Array(c),u=0;for(let e=0;e<i;e+=1)for(let n=0;n<t.length;n+=1)e<o[n].length&&(l[u]=o[n][e],u+=1);for(let e=0;e<a;e+=1)for(let n=0;n<t.length;n+=1)e<s[n].length&&(l[u]=s[n][e],u+=1);return l},y=(e,t,r)=>{let i=n.#E(e,t),a=n.#w();for(let t=0;t<r.length;t+=1){let i=r[t];a.put(i.getMode(),4),a.put(i.getLength(),n.#b(i.getMode(),e)),i.write(a)}let o=0;for(let e=0;e<i.length;e+=1)o+=i[e].dataCount;if(a.getLengthInBits()>o*8)throw Error(`code length overflow. (${a.getLengthInBits()}>${o*8})`);for(a.getLengthInBits()+4<=o*8&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=o*8||(a.put(n.#c,8),a.getLengthInBits()>=o*8));)a.put(n.#l,8);return v(a,i)};return l.addData=(e,t)=>{t||=`Byte`;let r=null;switch(t){case`Byte`:r=n.#T(e);break;default:throw Error(`mode:${t}`)}c.push(r),s=null},l.isDark=(e,t)=>{if(e<0||o<=e||t<0||o<=t)throw Error(`${e},${t}`);return a[e][t]},l.getModuleCount=()=>o,l.make=()=>{if(r<1){let e=1;for(;e<40;e++){let t=n.#E(e,i),r=n.#w();for(let t=0;t<c.length;t++){let i=c[t];r.put(i.getMode(),4),r.put(i.getLength(),n.#b(i.getMode(),e)),i.write(r)}let a=0;for(let e=0;e<t.length;e++)a+=t[e].dataCount;if(r.getLengthInBits()<=a*8)break}r=e}u(!1,f())},l}generate(e,t={}){let n=t.margin===void 0?4:t.margin,r=t.moduleColor||`#000000`,i=t.positionRingColor||`#000000`,a=t.positionCenterColor||`#000000`,o=t.backgroundColor||`#ffffff`,s=t.positionMarkerRadius===void 0?0:t.positionMarkerRadius,c=t.dataMarkerRadius===void 0?0:t.dataMarkerRadius,l=t.size===void 0?180:t.size,u=this.#O(0,`H`);u.addData(e),u.make();let d=u.getModuleCount(),f=d+n*2,p=document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);p.setAttribute(`width`,l),p.setAttribute(`height`,l),p.setAttribute(`viewBox`,`0 0 ${f} ${f}`),p.setAttribute(`xmlns`,`http://www.w3.org/2000/svg`),p.setAttribute(`class`,`qr-code`);let m=document.createElementNS(`http://www.w3.org/2000/svg`,`rect`);m.setAttribute(`width`,f),m.setAttribute(`height`,f),m.setAttribute(`class`,`qr-background`),m.setAttribute(`fill`,o),p.appendChild(m),this.#D(p,0,0,n,i,a,o,s),this.#D(p,d-7,0,n,i,a,o,s),this.#D(p,0,d-7,n,i,a,o,s);let h=c>0?c/100*.5:0,g=0;for(let e=0;e<d;e++)for(let t=0;t<d;t++)if(!this.#h(t,e,d)&&u.isDark(e,t)){g+=1;let i=document.createElementNS(`http://www.w3.org/2000/svg`,`rect`);i.setAttribute(`x`,e+n),i.setAttribute(`y`,t+n),i.setAttribute(`width`,1),i.setAttribute(`height`,1),i.setAttribute(`class`,`qr-module`),i.setAttribute(`fill`,r),h>0&&(i.setAttribute(`rx`,h),i.setAttribute(`ry`,h)),p.appendChild(i)}return p}};export{e as QRCode};